{% extends 'base.html' %}

{% block head %}
<title>Results for {{ search }}</title>
{% endblock %}


{% block content %}

<div class="content-container">
	<h1>Results for {{ search }}</h1>

	{% for category, techs in results.items %}
		{% if techs %}
		<section class="category">
			<h2>{{ category }}</h2>

			{% if category == 'Other uncategorized keywords' %}
			<div class="other-keywords">
				{% for tech in techs %}
				<p class="other-keyword">{{ tech.name }} ({{ tech.count }})</p>
				{% endfor %}
			</div>
			
			{% else %}
			{% for tech in techs %}
			<div class="tech-container">
				<p class="tech-name">{{ tech.name }}</p>
				<div class="graph">
					<div class="bar" style="width:{{ tech.graph_percentage }};"></div>
					<p class="tech-count">{{ tech.count }}</p>
				</div>
			</div>
			{% endfor %}
			{% endif %}
		</section>
		{% endif %}
	{% endfor %}
</div>

{% endblock %}


{% block scripts %}

<script>
const gray = 'rgba(128, 128, 128, 0.28)';
let i = 0;
document.querySelectorAll('.category').forEach(category => {
	if (i % 2 === 0) category.style.backgroundColor = gray;
	i++;
});
</script>

{% endblock %}